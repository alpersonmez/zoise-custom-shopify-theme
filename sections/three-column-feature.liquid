<section class="three-column-feature">
  <div class="three-column-feature__container">
    <div class="three-column-feature__inner">
      {%- for block in section.blocks -%}
        <a href="{{ block.settings.link }}" class="three-column-feature__item">
          <div class="three-column-feature__image-wrapper">
            <img src="{{ block.settings.image | image_url: width: 768 }}" alt="{{ block.settings.image_alt | escape }}" class="three-column-feature__image">
          </div>
          <div class="three-column-feature__text">
            {{ block.settings.text }}
          </div>
        </a>
      {%- endfor -%}
    </div>
  </div>
  <style>
    .three-column-feature {
      width: 100%;
      padding: 0;
      margin: 0;
    }
    .three-column-feature__container {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
    }
    .three-column-feature__item {
      width: calc(33.333% - 16px);
      margin: 8px;
      text-align: center;
      text-decoration: none;
      color: inherit;
    }
    .three-column-feature__image-wrapper {
      position: relative;
      padding-bottom: 150%; /* Aspect ratio for the image */
    }
    .three-column-feature__image {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .three-column-feature__text {
      margin-top: 12px;
      font-size: 1.2rem;
    }
    @media (max-width: 830px) {
      .three-column-feature__item {
        width: calc(50% - 16px);
      }
    }
    @media (max-width: 480px) {
      .three-column-feature__item {
        width: calc(100% - 16px);
      }
    }
  </style>
</section>

{% schema %}
{
  "name": "Three Column Feature",
  "settings": [],
  "blocks": [
    {
      "type": "feature",
      "name": "Feature Block",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "image_alt",
          "label": "Alt text for image"
        },
        {
          "type": "textarea",
          "id": "text",
          "label": "Text"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Three Column Feature",
      "category": "Custom"
    }
  ]
}
{% endschema %}
