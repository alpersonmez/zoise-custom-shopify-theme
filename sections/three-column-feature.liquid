<section class="three-column-feature">
    <div class="three-column-feature__container">
        <div class="three-column-feature__inner">
        {%- for block in section.blocks -%}
            <a href="{{ block.settings.link }}" class="three-column-feature__item item__{{ forloop.index }}">
            <div class="three-column-feature__image-wrapper">
                <img 
                src="{{ block.settings.image | image_url: width: 768 }}" 
                alt="{{ block.settings.image_alt | escape }}" 
                class="three-column-feature__image">
                <div class="three-column-feature__content three-column-feature__content--{{ block.settings.text_position }}">
                {{ block.settings.liquid_content }}
                </div>
            </div>
            </a>
        {%- endfor -%}
        </div>
    </div>     
  <style>
    .three-column-feature {
      width: 100%;
      padding: 0;
      margin: 0;
    }
    .three-column-feature__container {
    display: flex;
    flex-wrap: wrap;
    gap: 20px; /* Gap between items */
    padding: 20px; /* Padding around the container */
    width: 100%;
    box-sizing: border-box;
    }

    .three-column-feature__inner {
    display: flex;
    width: 100%;
    height: 100%;
    flex-wrap: wrap;
    gap: 20px; /* Gap between the items */
    }

    .three-column-feature__item {
    position: relative;
    width: calc(33.333% - 0px); /* 3 items per row */
    flex: 1;
    box-sizing: border-box;
    }

    .three-column-feature__image-wrapper {
        position: relative;
        width: 100%;
        padding-bottom: 150%; /* Aspect ratio */
        overflow: hidden;
        border-radius: 8px;
    }

    .three-column-feature__image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    }

    .three-column-feature__content {
    position: absolute;
    width: 100%;
    color: white;
    text-align: center;
    font-size: inherit;
    }

    .three-column-feature__content--top {
    top: 0;
    transform: translateY(0%);
    }

    .three-column-feature__content--middle {
    top: 50%;
    transform: translateY(-50%);
    }

    .three-column-feature__content--bottom {
    bottom: 0;
    transform: translateY(0%);
    }

    /* Responsive Layout (Below 830px) */
    @media (max-width: 830px) { 
    .three-column-feature__container{
        padding: 10px;
    }

    .three-column-feature__inner{
        gap: 10px;
    }

     /* Block 2 takes first place with full width */
    .three-column-feature__item.item__2 {
        flex: 1 1 100%; /* Full width */
        order: 1; /* First in the row */
    }

    /* Block 1 and Block 3 come on the second row side by side */
    .three-column-feature__item.item__1,
    .three-column-feature__item.item__3 {
        flex: 1 1 calc(50% - 10px); /* Two columns side by side */
        order: 2; /* Second in the row */
    }
    }

  </style>
</section>

{% schema %}
{
  "name": "Three Column Feature",
  "settings": [],
  "blocks": [
    {
      "type": "feature",
      "name": "Feature Block",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "image_alt",
          "label": "Alt text for image"
        },
        {
          "type": "textarea",
          "id": "text",
          "label": "Text"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        },
        {
          "type": "select",
          "id": "text_position",
          "label": "Text Position",
          "options": [
            {
              "value": "top",
              "label": "Top"
            },
            {
              "value": "middle",
              "label": "Middle"
            },
            {
              "value": "bottom",
              "label": "Bottom"
            }
          ],
          "default": "middle"
        },
        {
          "type": "liquid",
          "id": "liquid",
          "label": "Custom Content (Liquid)"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Three Column Feature",
      "category": "Custom"
    }
  ]
}
{% endschema %}
